<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hosting a hidden service</title>

    <!-- Bootstrap -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="blog.css" rel="stylesheet">
  </head>
  <body>


    <header class="navbar navbar-static-top bs-docs-nav">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="navbar-brand">Anonoblog</a>
        </div>
        <div class="navbar navbar-static-top bs-docs-nav">
          <ul class="nav navbar-nav"> 
            <li class="active"> <a href="index.html">The project</a> </li>
            <li> <a href="hidden-service.html">Set up a hidden service</a> </li> 
            <li> <a href="anonymous-server.html">Manage a server anonymously</a> 
          </ul>
        </div>
      </div>
    </header>
    <div class="bs-docs-header">
      <div class="container">
        <h1>Hello, tor!</h1>
        <div>Creating and running a tor hidden service anonymously</div>
      </div>
    </div>
    <div class="main-content">
      <div class="container">

      <p>
        This tutorial will help you set up tor and a hidden service from OSX.
      </p>
      <h2>Install tor</h2>
      <p>
        First, install tor:
        <pre>brew install tor</pre>
        tor settings can be found at <code>/usr/local/etc/tor/</code>
        run tor, 
        <pre>tor</pre>
        tor is now listening on port 9050. Your internet wont use tor by default, you have to manually route apps through tor.
        With tor running, open a new tab and run curl. This should echo html from stackoverflow.com.

        <pre>curl --socks5-hostname 127.0.0.1:9050 stackoverflow.com</pre>


      </p>
      <h2>Creating a hidden service .onion domain</h2>
      <p>
      Tor allows you to expose a web service anonymously. First lets set up a very simple webserver in a new terminal tab.

      <pre>mkdir simple-service
cd simple-service
echo "Hello web" > index.html
python -m SimpleHTTPServer 8000</pre>
      Test that it is working by opening a new tab and running 
      <pre>curl localhost:8000</pre>
      </p>


      <p>
        Edit your torrc
      </p>

        <pre>vi /usr/local/etc/tor/torrc</pre>
        <p>
        Add the following lines to your torrc
        </p>

        <pre>log info file /usr/local/etc/tor/tor.log
# hidden services!
HiddenServiceDir /usr/local/etc/tor/hidden_http_service/
HiddenServicePort 80 127.0.0.1:8000</pre>

        This will take the server running on localhost port 8000 and make it available as a tor hidden service

        Restart tor for the changes to take effect

        <pre>tor</pre>

        You don't choose your onion domain name for your hidden service. It is generated by tor. To find your domain name, read the contents of this file.
        <pre>cat /usr/local/etc/tor/hidden_http_service/hostname
    xxxxxxxxxxxxxx.onion</pre>

        You can test your service like using curl through tor
        <pre>curl --socks5-hostname 127.0.0.1:9050 xxxxxxxxxxxxxx.onion</pre>

        Your service is now published! test the .onion link from someone elses machine



        <h2>Congratulations! you have a tor hidden service running.</h2>
        <p>
        People can anonymously connect to it and get your hello world message but won't be able to identify your machine. 
        </p>

        <p>
          Now you've got the basics set up, you'll want to get it hosted somewhere reliable.
          The next tutorial shows you how to set up and pay for a web server anonymously. 
          This will provide better reliability for your service and if done correctly will provide a second anonymous shield between you and anyone trying to learn your identity.
        </p>

      <p>
        <a href="anonymous-server.html">Hosting things anonymously</a>
      </p>

      </div>
    </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
  </body>
</html>